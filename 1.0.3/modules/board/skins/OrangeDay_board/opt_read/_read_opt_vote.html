{@
	$count_v = (int)($oDocument->get('voted_count'));
	$count_b = (int)($oDocument->get('blamed_count')) * -1;
	if ($count_v > 0 && $count_b > 0 ) :
		$totalVote = $count_v + $count_b;
		$totalVotePer = ($count_v / $totalVote) * 100;
		$casev = 10;
	elseif ($count_v > 0 && $count_b < 1 ) :
		$totalVotePer = 100;
		$totalVote = $count_v + $count_b;
		$casev = 2;
	elseif ($count_v < 1 && $count_b > 0 ) :
		$totalVotePer = 0;
		$totalVote = $count_v + $count_b;
		$casev = 2;
	endif;
}
<div class="voteVs">
	<div class="voteA voteV">		
		<a cond="$oDocument->getMyVote() === false || $oDocument->getMyVote() < 0" href="#" onclick="doCallModuleAction('document','procDocumentVoteUp','{$oDocument->document_srl}');return false;" class="voted">
			<span class="material-symbols-sharp fill">favorite</span>
		</a>
		<a cond="$oDocument->getMyVote() > 0" href="#" onclick="doCallModuleAction('document','procDocumentVoteUpCancel','{$oDocument->document_srl}');return false;" class="voted">
			<span class="material-symbols-sharp fill">favorite</span>
		</a>		
		<span class="active">{$count_v}</span>
	</div>		
	<div class="voteGraph<!--@if($oDocument->get('voted_count') || $oDocument->get('blamed_count'))--> activeVs<!--@end-->">
		<div class="perbar" style="width: <!--@if($oDocument->get('voted_count') || $oDocument->get('blamed_count'))-->{$totalVotePer}<!--@else-->0<!--@end-->%;">
			<i class='bx bxs-heart bx-tada' cond="$oDocument->get('voted_count') || $oDocument->get('blamed_count')"></i>
		</div>
	</div>
	<div class="voteA voteB">
		<span class="active">{$count_b}</span>		
		<a cond="$oDocument->getMyVote() === false || $oDocument->getMyVote() > 0" href="#" onclick="doCallModuleAction('document','procDocumentVoteDown','{$oDocument->document_srl}');return false;" class="voted">
			<span class="material-symbols-sharp fill">heart_broken</span>
		</a>
		<a cond="$oDocument->getMyVote() < 0" href="#" onclick="doCallModuleAction('document','procDocumentVoteDownCancel','{$oDocument->document_srl}');return false;" class="voted">
			<span class="material-symbols-sharp fill">heart_broken</span>
		</a>
	</div>
</div>
{@
	$args = new stdClass();
	$args->more_point = 1;
	$args->document_srl = $document_srl;
	$output = executeQueryArray('document.getVotedMemberList',$args);
}
<div cond="$output->data" class="voteVsTitle"><i class='bx bxs-heart' ></i>  추천인 </div>
<div cond="$output->data" class="voteVsList">
		
		<a loop="$output->data=>$key,$val" href="#popup_menu_area" class="member_{$val->member_srl}" onclick="return false" title="{$val->nick_name}">
		{@
			$oMemberModel = getModel('member');
			$profile_info = $oMemberModel->getProfileImage($val->member_srl);
		}
		<!--@if($profile_info->src)-->
		<img src="{$profile_info->src}" title="{$val->nick_name}" class="profile metatooltip">
		<!--@else-->
		<span title="{$val->nick_name}" class="profile metatooltip"><i class='bx bxs-ghost'></i></span>						
		<!--@end-->
		</a>

</div>
<style>
.voteVs { padding: var(--oday_sideGapLR); opacity:1; display:flex; align-items: center; max-width:var(--oday_maxWidth); 
  margin-bottom:1em;
}
.voteGraph {mix-blend-mode: luminosity; opacity:.5}
.voteGraph.activeVs {mix-blend-mode:unset; opacity:1}
.voteA {flex-shrink: 0; width:fit-content; height:fit-content; display:flex; align-items: center; justify-content: center;}
.voteA span { font-size:.9em;}
.voteA span.material-symbols-sharp { font-size:1.4em;}
.voteA > * + * { margin-left:5px;}
.voteA.voteV {color:var(--oday_mainColor); padding-right:10px;}
.voteA.voteV a {color:var(--oday_mainColor); }
.voteA.voteB {color:var(--oday_mainColorLight); padding-left:10px;}
.voteA.voteB a {color:var(--oday_mainColorLight);}
.voteVs .voteGraph { background-color:var(--oday_mainColorLight); border:4px solid var(--oday_listBgColor); width:100%; height:10px; border-radius:3px; display: flex; align-items: center;}
.voteVs .voteGraph .perbar { height:2px; background-color:var(--oday_mainColor); border-radius:10px 0 0 10px;  display: flex; align-items: center; justify-content: flex-end;}
.voteVs .voteGraph .perbar > * { color:var(--oday_mainColor); font-size:1.4em; margin-right: -9px; }

.voteVsTitle { text-align:center; font-size:11px; font-weight:500; padding: var(--oday_sideGapLR); padding-bottom:5px; }
.voteVsTitle i { font-size:1.4em}

.voteVsList { display:flex; align-items: center; justify-content: center; padding: var(--oday_sideGapLR); margin-bottom:2em; flex-wrap: wrap; max-width:var(--oday_maxWidth)} 
.voteVsList a { margin-bottom:2px}
.voteVsList a + a { margin-left:2px;}
.voteVsList a .profile { width: var(--oday_metaIconSize); height: var(--oday_metaIconSize);  display:flex; align-items: center; justify-content: center; border-radius:100%;
border: var(--oday_listBorder); background-color: var(--oday_listBgColorStress1); font-size:calc(var(--oday_metaIconSize) * .5); color:var(--oday_fontColor);}
.voteVsList a .profile i { opacity:.7}
</style>
<script>
$(function(){
	$(".metatooltip").tooltip({
		delay:0,
		opacity:1,
		position: { 
			my: "center bottom-20", at: "center top+10",
			using: function( position, feedback ) {
				$( this ).css( position );
				$( "<div>" )
				.addClass( "ui-tooltip-arrow" )
				.addClass( feedback.vertical )
				.addClass( feedback.horizontal )
				.appendTo( this );
			}		
		}
	});	   
});

</script>	
<script>

jQuery(function($){
    for(var i=0 ; i < $(".voteVsList a .profile").length; i++){
        var f_color = "#"+(parseInt(Math.random()*0xffffff)).toString(16);
        $(".voteVsList a .profile").eq(i).css("color",f_color);
    }
});

</script>